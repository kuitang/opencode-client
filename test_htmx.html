<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/htmx.org@2.0.3"></script>
    <script>
        // Debug HTMX events
        document.addEventListener('htmx:beforeRequest', function(evt) {
            console.log('HTMX Request:', evt.detail);
        });
    </script>
</head>
<body>
    <h1>Test File Dropdown Refresh</h1>

    <p>Open browser console to see HTMX events</p>

    <!-- Test the actual code -->
    <div id="file-selector-wrapper"
         hx-get="http://localhost:8080/tab/code/filelist"
         hx-trigger="focus from:#file-selector"
         hx-target="#file-selector"
         hx-swap="outerHTML"
         hx-vals="js:{current: document.getElementById('file-selector').value}">
        <select id="file-selector">
            <option value="">Select a file...</option>
            <option value="old1.txt">old1.txt</option>
        </select>
    </div>

    <hr>

    <h2>Alternative: Click anywhere on wrapper</h2>
    <div id="alt-wrapper"
         style="border: 1px solid blue; padding: 10px; display: inline-block;"
         hx-get="http://localhost:8080/tab/code/filelist"
         hx-trigger="click"
         hx-target="#alt-select"
         hx-swap="outerHTML"
         hx-vals="js:{current: document.getElementById('alt-select').value}">
        Click this area to refresh:
        <select id="alt-select">
            <option value="">Select a file...</option>
            <option value="old2.txt">old2.txt</option>
        </select>
    </div>
</body>
</html>